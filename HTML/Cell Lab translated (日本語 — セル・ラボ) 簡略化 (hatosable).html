<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1">
    <title>セル・ラボ — Keep Talking and Nobody Explodes Module</title>
        <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
        <link rel="stylesheet" type="text/css" href="css/normalize.css">
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <script src="js/ktane-utils.js"></script>
        <style>
            table {
                margin: 1em auto;
            }
        </style>
    </head>
    <body>
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">セル・ラボ</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Cell Lab.svg" class="diagram">
                <h2>モジュール詳細：セル・ラボ</h2>
                    <p class="flavour-text">単純細胞じゃなくて、単細胞。</p>

                    <p>このモジュールは、三つすべての画面を正しく設定すると自動的に解除される。ミスが記録されることはない。Edit Modeの隣にある「M1」の文字は、現在表示されている画面を示す。この文字を押すと、画面を切り替えることができる。</p>
                    <p>各画面で、共通ステップを実施したら以下の表を用いてその後のステップを求め、その指示に従う。各ステップは一回ずついずれかの画面で実施することになる。</strong></p>
                    <p>これ以降、C<sub>+</sub>は画面内のRed color/Green color/Blue colorのうち最も高い値、C<sub>0</sub>は真ん中の値、C<sub>-</sub>は最も低い値を示す。%は、剰余の演算子である。割り算は、特に言及されていない限り、すべての演算終了後に小数点以下を切り捨てる。</p>
                    <p><b>※Split massが「never」に設定されている場合、その画面に対しては共通ステップのみ実施すればよい。</b></p>
                    <table>
                        <tr><th>初期状態のパラメータが0の要素<br><span style="font-size: 75%;">パラメータが0の要素は、押すと数字が変化する</span></th><th>ステップ</th><th>導出に必要な情報</th></tr>
                        <tr><td>Split massとSplit angle</td><td>H</td><td>C<sub>-</sub>, C<sub>0</sub>, C<sub>+</sub></td></tr>
                        <tr><td>Child 1 angle</td><td>S</td><td>C<sub>-</sub>, C<sub>+</sub></td></tr>
                        <tr><td>Child 2 angle</td><td>V</td><td>C<sub>+</sub></td></tr>
                    </table>
                    <h3>共通ステップ：細胞の種類</h3>
                    <p>3つの画面の情報と以下の表を参照し、Edit modeの右端にある二文字の英字を正しい状態に設定する。</p>
                    <p>※下記の表は、M1の細胞の種類を特定する際の表である。M2やM3の細胞の種類を特定するには、M1を対応する細胞、M2とM3をそれ以外の細胞に置き換える。</p>
                    <table>
                        <tr><th>合致した条件を適用</th><th>設定値</th></tr>
                        <tr><td>M1のChildが両方M1</td><td>dv</td></tr>
                        <tr><td>M1のChildが片方のみM1</td><td>M2とM3の画面に切り替える
                            <br><br>
                            両方の画面のChildにM1が含まれる：dv<br>
                            片方の画面のChildのみM1が含まれる：pg<br>
                            両方の画面のChildにM1が含まれない：kt
                        </td></tr>
                        <tr><td>M1のChildがどちらもM1ではない</td><td>M2とM3の画面に切り替える
                            <br>
                            両方の画面のChildにM1が含まれる：pt<br>
                            片方の画面のChildのみM1が含まれる：fl<br>
                            両方の画面のChildにM1が含まれない：lp
                        </td></tr>
                    </table>

                    </div>
                <div class="page-footer relative-footer">ページ 1/2</div>
            </div>
            
            <div class="page page-bg-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">セル・ラボ</span>
                </div>
                <div class="page-content">
                    <h3>ステップH：色相</h3>
                    <p>下記の式から、H'を求める。</p>
                    <p class="centered">H' = (C<sub>0</sub> - C<sub>-</sub>)/(C<sub>+</sub> - C<sub>-</sub>) * 60</p>
                    <p>求めたH'を、下記の表を使用して調整する。これがHである。</p>
                    <table>
                        <tr class="centered"><th colspan="6">RGBの順に並べた時のC<sub>-</sub>, C<sub>0</sub>, C<sub>+</sub></th></tr>
                        <tr><td>+0-</td><td>0+-</td><td>-+0</td><td>-0+</td><td>0-+</td><td>+-0</td></tr>
                        <tr><td>H'</td><td>120 - H'</td><td>120 + H'</td><td>240 - H'</td><td>240 + H'</td><td>360 - H'</td></tr>
                    </table>

                    <p>Hが5未満の場合Hを使用して、設定するパラメータを求める。<strong>割り算は、掛け算を行う前に小数点以下を切り捨てる。</strong></p>
                    <p class="centered">Split mass = (H % 15) * 0.22</p>
                    <p class="centered">Split angle = (H / 15) * 15</p>

                    <h3>ステップS：彩度</h3>
                    <p>下記の式から、Sを求める。</p>
                    <p class="centered">S = (C<sub>+</sub> - C<sub>-</sub>)/C<sub>+</sub> * 100 - 5</p>
                    <p>Sを使用して、設定するパラメータを求める。</p>
                    <p class="centered">Child 1 angle = (S % 24) * 15</p>
                    <p>(S / 24)が奇数の場合、Child 1のKeep adhesinをオンにする。そうでない場合、オフにする。</p>


                    <h3>ステップV：明度</h3>
                    <p>下記の式から、Vを求める。</p>
                    <p class="centered">V = C<sub>+</sub>/2.55 - 5</p>
                    <p>Vを使用して、設定するパラメータを求める。</p>
                    <p class="centered">Child 2 angle = (V % 24) * 15</p>
                    <p>(V / 48)が奇数の場合、Make adhesinをオンにする。そうでない場合、オフにする。</p>
                    <p>(V / 24)が奇数の場合、Child 2のKeep adhesinをオンにする。そうでない場合、オフにする。</p>
                    </div>
                <div class="page-footer relative-footer">ページ 2/2</div>
            </div>
        </div>
    </body>
</html>