<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>The Black Page — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>

    <script>
        const measures = ["1-3", "4-5", "6-9", "10-12", "13-14", "15-17", "18-20", "21-24", "25-26", "27-28", "29-30"];
        $(function () {
            $(".no-points li").each(function (ix) {
                var elem = $(this);
                var audio = $("<audio>")
                    .on("error", function () {
                        button.addClass("failed");
                    })
                    .attr("src", `../HTML/audio/The Black Page/${measures[ix]}.mp3`)
                    .on("ended", function () {
                        
                        button.removeClass("playing");
                    })
                    .appendTo(elem);

                var button = $("<a href='#' class='play-button'>▶</a>")
                    .click(function () {
                        if (button.hasClass("playing")) {
                            button.removeClass("playing");
                            audio[0].pause();
                            audio[0].currentTime = 0;
                        } else {
                            button.addClass("playing");
                            audio[0].play();
                        }
                        return false;
                    })
                    .prependTo(elem);
            });
        });
    </script>
    <style>
        .sheetmusic {
            height: 100%;
            width: 100%;
        }
        .no-points {
            margin-top: 1em;
            border: none;
            list-style: none;
        }

        .dark a,
        a {
            display: inline-block;
            margin-right: .5em;
            text-decoration: none;
            color: white;
            font-size: 80%;
            transition: color .1s;

            background: #008;
            border-radius: 50%;
            width: 1.5em;
            height: 1.5em;
            text-align: center;
            padding-left: .1em;
            box-sizing: border-box;
            font-family: monospace;
        }

        a:hover:not(.failed):not(.playing) {
            color: #ff8;
        }

        a.playing {
            color: #8f8;
        }

        a.failed {
            cursor: not-allowed;
            color: red;
        }
        .page-footer::before {
            content: "Page ";
        }

        .page-footer::after {
            content: " of 3";
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Black Page</span>
            </div>
            <div class="page-content">
                <img src="img/Component/The Black Page.svg" class="diagram">
                <h2>On the Subject of The Black Page</h2>
                <p class="flavour-text">Every musician’s test to read.</p>
                <p>This module contains a play button, a submit button, and two screens with numbers that you can cycle through.</p>
                <p>Once the play button is pressed, the module will play 4–6 measures (or bars) of The Black Page.</p>
                <p>To solve the module, enter the starting and ending measures played by the module using the screens on the module, then press the submit button.</p>
                <p>There are two lights on the top of the module. If the left one is on, the module started with a measure in the first half of the song.
                If the right one is on, the module started with a measure in the second half of the song.</p>
                <p>Before the lights in the bomb’s room turn on, an image of the first measure the module selected will display itself on the module.
                When the room’s lights turn on, the image will fade away and it will only reappear if the module strikes.</p>
                <p>The following page has the sheet music of the rhythms for <i>The Black Page #1</i> by Frank Zappa.
                The song is played in 60 BPM.</p>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Black Page</span>
            </div>
            <div class="page-content">
                <img src="img/The Black Page/SheetMusic.jpg" class="sheetmusic">
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Black Page</span>
            </div>
            <div class="page-content">
                <h3>Audio by Lines</h3>
                <ul class="no-points">
                    <li>Measures 1-3</li>
                    <li>Measures 4-5</li>
                    <li>Measures 6-9</li>
                    <li>Measures 10-12</li>
                    <li>Measures 13-14</li>
                    <li>Measures 15-17</li>
                    <li>Measures 18-20</li>
                    <li>Measures 21-24</li>
                    <li>Measures 25-26</li>
                    <li>Measures 27-28</li>
                    <li>Measures 29-30</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>
    </div>
</body>
</html>
