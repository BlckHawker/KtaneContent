<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Свободная касса! — Keep Talking and Nobody Explodes Mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-cyrillic.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/Modules/Cheap Checkout.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .hstack table { width: 49.4%; }
    </style>
    <script>
        let Prices = [
            // Original 34 items
            "Candy Canes / Карамельные трости,3.51,Сладости",
            "Socks / Носки,6.97,Прочее",
            "Lotion / Лосьон,7.97,Красота/Гигиена",
            "Cheese / Сыр,4.49,Молочные",
            "Mints / Мятные конфеты,6.39,Сладости",
            "Grape Jelly / Виноградный джем,2.98,Сладости",
            "Honey / Мёд,8.25,Сладости",
            "Sugar / Сахар,2.08,Сладости",
            "Soda / Газировка,2.05,Сладости",
            "Tissues / Салфетки,3.94,Красота/Гигиена",
            "White Bread / Белый хлеб,2.43,Зерновые",
            "Canola Oil / Рапсовое масло,2.28,Масловые",
            "Mustard / Горчица,2.36,Прочее",
            "Deodorant / Дезодорант,3.97,Красота/Гигиена",
            "White Milk / Молоко,3.62,Молочные",
            "Pasta Sauce / Томатный соус,2.30,Овощи",
            "Lollipops / Леденцы,2.61,Сладости",
            "Cookies / Печенье,2.00,Сладости",
            "Paper Towels / Бумажные полотенца,9.46,Красота/Гигиена",
            "Tea / Чай,2.35,Напитки",
            "Coffee Beans / Кофейные зёрна,7.85,Прочее",
            "Mayonnaise / Майонез,3.99,Масловые",
            "Chocolate Milk / Шоколадное молоко,5.68,Молочные",
            "Fruit Punch / Пунш,2.08,Сладости",
            "Potato Chips / Картофельные чипсы,3.25,Масловые",
            "Shampoo / Шампунь,4.98,Красота/Гигиена",
            "Toothpaste / Зубная паста,2.50,Красота/Гигиена",
            "Peanut Butter / Арахисовая паста,5.00,Белковые",
            "Gum / Жвачка,1.12,Сладости",
            "Water Bottles / Вода в бутылках,9.37,Напитки",
            "Spaghetti / Спагетти,2.92,Зерновые",
            "Chocolate Bar / Шоколад,2.10,Сладости",
            "Ketchup / Кетчуп,3.59,Прочее",
            "Cereal / Хлопья,4.19,Зерновые",

            // New rule seed items
            "Eggs / Яйца,2.67,Белковые",
            "Baked Beans / Жареные бобы,1.14,Белковые",
            "Peanuts / Арахис,5.98,Белковые",
            "Yogurt / Йогурт,2.72,Молочные",
            "Greek Yogurt / Греческий йогурт,3.47,Молочные",
            "Butter / Масло,5.86,Молочные",
            "Toothbrush / Зубная щетка,2.24,Красота/Гигиена",
            "Medicine / Медикаменты,3.73,Красота/Гигиена",
            "Soup / Суп,1.99,Прочее",
            "Soap / Мыло,3.97,Красота/Гигиена",
            "Pretzels / Крендели,2.98,Зерновые",
            "Popcorn / Попкорн,2.50,Зерновые",
            "Oatmeal / Овсянка,7.98,Зерновые",
            "Rice / Рис,2.02,Зерновые",
            "Flour / Мука,3.49,Зерновые",
            "Licorice / Лакрица,1.98,Сладости",
            "Pie / Пирог,3.98,Сладости",
            "Cake / Торт,9.98,Сладости",
            "Gummy Bears / Мармеладные мишки,7.98,Сладости",
            "Relish / Релиш,2.74,Овощи",
            "Napkins / Платки,1.09,Красота/Гигиена",
            "Band-Aids / Пластыри,1.11,Красота/Гигиена",
            "Playing Cards / Игральные карты,2.13,Прочее",
            "Beef Jerky / Вяленая говядина,1.23,Прочее",
            "Ice Cream / Мороженое,4.99,Молочные",
            "Salad Mix / Салатная смесь,2.47,Овощи",
            "Bagel / Бублик,4.20,Зерновые",
            "Vegetable Oil / Овощное масло,2.89,Масловые",
            "Batteries / Батарейки,4.49,Прочее",
            "Taco Shells / Основа для тако,5.01,Зерновые",
            "Bleach / Отбеливатель,6.90,Прочее",
            "Baking Soda / Пищевая сода,0.33,Прочее",
            "Paper Bags / Бумажные пакеты,1.07,Прочее",
            "Printer Paper / Бумага для печати,4.49,Прочее",
            "Diapers / Подгузники,6.96,Красота/Гигиена",
            "Shower Gel / Гель для душа,1.63,Красота/Гигиена",
            "Makeup Remover / Средство для снятия макияжа,1.02,Красота/Гигиена",
            "Blank DVDs / Пустые DVD,9.00,Прочее",
            "Nail Polish / Лак для ногтей,3.13,Красота/Гигиена",
            "Fusilli / Фузилли,2.92,Зерновые",
            "Tagliatelle / Тальятелле,2.92,Зерновые",
            "Spirelli / Макароны завитушки,2.92,Зерновые",
            "Penne / Пенне,2.92,Зерновые",
            "Car Engine Oil / Моторное масло,3.36,Масловые",
            "Parsley / Петрушка,0.69,Специи",
            "Sage / Шалфей,1.75,Специи",
            "Rosemary / Розмарин,3.19,Специи",
            "Thyme / Чебрец,2.89,Специи",
            "White Pepper / Белый перец,2.49,Специи",
            "Coriander / Кориандер,0.99,Специи",
            "Oregano / Орегано,1.59,Специи",
            "Cumin / Кумин,3.45,Специи",
            "Masala / Масала,4.99,Специи",
            "Saffron / Шафран,12.79,Специи",
            "Cinnamon / Корица,2.40,Специи",
            "Cayenne Pepper / Кайенский перец,11.27,Специи",
            "Ginger Root / Корень имбиря,1.00,Специи",
            "Salt / Соль,3.98,Специи",
            "Sesame / Кунжут,3.19,Специи",
            "Vanilla Extract / Ванильный экстракт,11.82,Специи",
            "Red Wine / Красное вино,20.90,Напитки",
            "White Wine / Белое вино,18.60,Напитки",
            "12-pack Beer / Двойная пачка пива,10.49,Напитки",
            "6-pack Beer / Пачка пива,5.79,Напитки",
            "Vinegar / Уксус,2.50,Прочее",
        ];

        let PricesLB = [
            // Original 12 weight based items
            "Turkey / Индейка,2.98,Белковые",
            "Chicken / Курица,1.99,Белковые",
            "Steak / Стейк,4.97,Белковые",
            "Pork / Свинина,4.14,Белковые",
            "Lettuce / Салат,1.10,Овощи",
            "Potatoes / Картофель,0.68,Овощи",
            "Tomatoes / Помидоры,1.80,Фрукты",
            "Broccoli / Брокколи,1.39,Овощи",
            "Oranges / Апельсины,0.80,Фрукты",
            "Lemons / Лемоны,1.74,Фрукты",
            "Bananas / Бананы,0.87,Фрукты",
            "Grapefruit / Грейпфрут,1.08,Фрукты",

            // New rule seed weight based items
            "Onions / Лук,1.82,Овощи",
            "Bacon / Бекон,5.52,Белковые",
            "Apples / Яблоки,1.32,Фрукты",
            "Grapes / Виноград,2.98,Фрукты",
            "Fish / Рыба,9.99,Белковые",
            "Watermelons / Арбузы,0.32,Фрукты",
            "Carrots / Морковь,0.77,Овощи",
            "Cherries / Вишня,3.21,Фрукты",
            "Plums / Слива,1.99,Фрукты",
            "Pumpkins / Тыквы,1.38,Фрукты",
            "Avocados / Авокадо,2.23,Фрукты",
            "Ham / Ветчина,2.88,Белковые",
            "Sausages / Сосиски,3.88,Белковые",
            "Corn / Кукуруза,1.14,Овощи",
            "Pears / Груши,1.74,Фрукты",
            "Leek / Лук-порей,3.17,Овощи",
            "Bologna / Болонья,1.69,Белковые",
            "Minced Beef / Говяжий фарш,2.36,Белковые",
            "Garlic / Чеснок,0.97,Овощи",
            "Tofu / Тофу,3.11,Белковые",
            "Salmon / Лосось,21.55,Белковые",
        ];

        let SundayValue = 215;
        let MondayPercent = 85;
        let TuesdayExcludedDigit = -1;
        let WednesdayLargeOrSmall = true;
        let WednesdayViceVersa = false;
        let ThursdayOddItems = true;
        let ThursdayPercent = 50;
        let FridayPercent = 125;
        let SaturdayPercent = 65;

        function toDollars(intDollars)
        {
            const stringDollars = intDollars.toString();
            if (intDollars < 100) return "0." + intDollars;
            else return stringDollars.substring(0, stringDollars.length - 2) + "." + stringDollars.substring(stringDollars.length - 2);
        }

        function toRelativePercent(absolutePercent)
        {
            if (absolutePercent > 100) return `${absolutePercent - 100}% дороже`;
            else if (absolutePercent == 50) return "половину их стоимости";
            else return `${100 - absolutePercent}%`
        }

        function setDefaultRules(rng)
        {
            setRules(rng);
        }

        function setRules(rng)
        {
            var prices, pricesLB;
            if (rng.seed == 1)
            {
                prices = Prices.slice(0, 34);
                pricesLB = PricesLB.slice(0, 12);
            }
            else
            {
                prices = rng.shuffleFisherYates(Prices.slice(0)).slice(0, 34);
                pricesLB = rng.shuffleFisherYates(PricesLB.slice(0)).slice(0, 12);

                for (var [index, item] of prices.entries())
                {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    prices[index] = split.join(",");
                }

                for (var [index, item] of pricesLB.entries())
                {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    pricesLB[index] = split.join(",");
                }

                SundayValue = rng.next(50, 301);
                MondayPercent = rng.next(10, 100);
                TuesdayExcludedDigit = rng.next(-1, 3);
                WednesdayLargeOrSmall = rng.next(0, 2) == 1;
                WednesdayViceVersa = rng.next(0, 2) == 1;
                ThursdayOddItems = rng.next(0, 2) == 1;
                ThursdayPercent = rng.next(25, 76);
                FridayPercent = rng.next(50, 201);
                SaturdayPercent = rng.next(50, 201);
            }

            const seededStrings = [
                toDollars(SundayValue),
                toRelativePercent(MondayPercent),
                TuesdayExcludedDigit == -1 ? "" : ` excluding the digit in the ${["ones", "tens", "hundreds"][TuesdayExcludedDigit]} place`,
                WednesdayLargeOrSmall ? "наибольшей" : "наименьшей",
                WednesdayLargeOrSmall ? "наименьшей" : "наибольшей",
                WednesdayViceVersa ? ", and vice versa" : "",
                ThursdayOddItems ? "нечётной" : "чётной",
                toRelativePercent(ThursdayPercent),
                toRelativePercent(FridayPercent),
                toRelativePercent(SaturdayPercent)
            ];

            const seededSpans = document.querySelectorAll("span.rule-seeded");
            for (const [index, seededSpan] of seededSpans.entries())
            {
                seededSpan.textContent = seededStrings[index];
            }

            const rows = Array.from(document.querySelectorAll(".page-bg-02 tr:nth-child(n+2), .page-bg-03 tr"));
            for (const [index, itemString] of prices.concat(pricesLB).sort().entries())
            {
                const children = rows[index % rows.length].children;
                const item = itemString.split(",");

                children[0].textContent = item[0];
                children[1].textContent = `$${item[1]}${pricesLB.includes(itemString) ? " за фунт" : ""}`;
                children[2].textContent = item[2];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Свободная касса!</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Cheap Checkout.svg">
                <h2>О Свободной кассе!</h2>
                <p class="flavour-text">Кто вообще в это время что-то покупает подобным образом?</p>
                <ul>
                    <li>Перед вами список купленных товаров, который можно просмотреть, нажав на стрелки.</li>
                    <li>Над ним указана цена, которую заплатил покупатель.</li>
                    <li>Сложите стоимость всех товаров, применяя к каждому из них скидку, учитывая день недели.</li>
                    <li>Товары на развес нужно взвесить, прежде чем применять к ним скидку.</li>
                    <li>Если покупатель заплатил достаточно, просто введите с помощью кнопок сумму сдачи, которую покупатель должен получить, а затем нажмите кнопку "SUBMIT".</li>
                    <li>Иначе, если покупатель заплатил не полностью, нажмите кнопку "SUBMIT" без ввода сдачи, чтобы уведомить об этом покупателя. Ждите новую сумму денег от покупателя, а затем посчитайте необходимую сдачу.</li>
                    <li>После того, как кнопка "SUBMIT" будет нажата, экран со сдачей будет очищен.</li>
                </ul>
                <h3>Глоссарий</h3>
                <ul>
                    <li>Цена за товар относится к цене до скидки.</li>
                    <li>У товаров с фиксированной ценой не меняется стоимость независимо от их веса.</li>
                    <li>Цифровой корень числа вычисляется следующим образом: все цифры числа суммируются, затем цифры уже полученного числа суммируются. Данный процесс идёт до тех пор, пока вы не получите одну цифру, которая и является цифровым корнем числа.</li>
                    <li>Если при округлении к ближайшему целому числу округляемая цифра равна 5 и более, происходит округление вверх, иначе — вниз.</li>
                </ul>

                <h3>Скидки:</h3>
                <div style="font-style: italic; font-size: 13px">День недели — дата, указанная на компьютере сапёра в момент активации модуля</div>

                <em>Важное Воскресенье</em>
                <div class="sale">Все товары с фиксированной ценой, в английском названии которых имеется буква S, стоят на <span class="rule-seeded">2.15</span> дороже.</div>

                <em>Податливый Понедельник</em>
                <div class="sale">Первый, третий и шестой товары в списке идут со скидкой в <span class="rule-seeded">15%</span>.</div>

                <em>Волнующий Вторник</em>
                <div class="sale">Подсчитайте цифровой корень товара без десятичного разделителя<span class="rule-seeded"></span>. Прибавьте столько долларов к цене товара. Применимо только к товарам с фиксированной стоимостью.</div>

                <em>Сумасшедшая Среда</em>
                <div class="sale">Поменяйте местами все появления <span class="rule-seeded">наибольшей</span> цифры в цене с <span class="rule-seeded">наименьшей</span><span class="rule-seeded"></span>.</div>

                <em>Чарующий Четверг</em>
                <div class="sale">Все товары на <span class="rule-seeded">нечётной</span> позиции в списке товаров идут в <span class="rule-seeded">половину их стоимости</span>.</div>

                <em>Фрутопятница</em>
                <div class="sale">Все фрукты стоят на <span class="rule-seeded">25% дороже</span> за фунт.</div>

                <em>Сладкая Суббота</em>
                <div class="sale">Все сладости идут со скидкой в <span class="rule-seeded">35%</span>.</div>
            </div>
            <div class="page-footer relative-footer">Стр. 1 из 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Свободная касса!</span>
            </div>
            <div class="page-content">
                <h3>Стоимость товаров:</h3>
                <div style="font-style: italic; font-size: 14px">Цены всегда пишутся в долларах, например, $0.68 вместо 68 центов. Все цены округляются до второго десятичного знака. Вы должны округлять стоимость товара после подсчёта его стоимости и применения скидки.</div>
                <div class="hstack smaller-font">
                    <table>
                        <tr><th>Товар</th><th>Цена</th><th>Категория</th></tr>
                        <tr><td>Bananas</td><td>$0.87 per lb</td><td>Фрукты</td></tr>
                        <tr><td>Broccoli</td><td>$1.39 per lb</td><td>Овощи</td></tr>
                        <tr><td>Candy Canes</td><td>$3.51</td><td>Сладости</td></tr>
                        <tr><td>Canola Oil</td><td>$2.28</td><td>Oil</td></tr>
                        <tr><td>Cereal</td><td>$4.19</td><td>Зерновые</td></tr>
                        <tr><td>Cheese</td><td>$4.49</td><td>Молочные</td></tr>
                        <tr><td>Chicken</td><td>$1.99 per lb</td><td>Белковые</td></tr>
                        <tr><td>Chocolate Bar</td><td>$2.10</td><td>Сладости</td></tr>
                        <tr><td>Chocolate Milk</td><td>$5.68</td><td>Молочные</td></tr>
                        <tr><td>Coffee Beans</td><td>$7.85</td><td>Прочее</td></tr>
                        <tr><td>Cookies</td><td>$2.00</td><td>Сладости</td></tr>
                    </table>
                    <table>
                        <tr><th>Товар</th><th>Цена</th><th>Категория</th></tr>
                        <tr><td>Mints</td><td>$6.39</td><td>Сладости</td></tr>
                        <tr><td>Mustard</td><td>$2.36</td><td>Прочее</td></tr>
                        <tr><td>Oranges</td><td>$0.80 per lb</td><td>Фрукты</td></tr>
                        <tr><td>Paper Towels</td><td>$9.46</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Pasta Sauce</td><td>$2.30</td><td>Овощи</td></tr>
                        <tr><td>Peanut Butter</td><td>$5.00</td><td>Белковые</td></tr>
                        <tr><td>Pork</td><td>$4.14 per lb</td><td>Белковые</td></tr>
                        <tr><td>Potato Chips</td><td>$3.25</td><td>Oil</td></tr>
                        <tr><td>Potatoes</td><td>$0.68 per lb</td><td>Овощи</td></tr>
                        <tr><td>Shampoo</td><td>$4.98</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Socks</td><td>$6.97</td><td>Прочее</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Стр. 2 из 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Свободная касса!</span>
            </div>
            <div class="page-content">
                <div class="hstack smaller-font">
                    <table>
                        <tr><td>Deodorant</td><td>$3.97</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Фрукты Punch</td><td>$2.08</td><td>Сладости</td></tr>
                        <tr><td>Grape Jelly</td><td>$2.98</td><td>Сладости</td></tr>
                        <tr><td>Grapefruit</td><td>$1.08 per lb</td><td>Фрукты</td></tr>
                        <tr><td>Gum</td><td>$1.12</td><td>Сладости</td></tr>
                        <tr><td>Honey</td><td>$8.25</td><td>Сладости</td></tr>
                        <tr><td>Ketchup</td><td>$3.59</td><td>Прочее</td></tr>
                        <tr><td>Lemons</td><td>$1.74 per lb</td><td>Фрукты</td></tr>
                        <tr><td>Lettuce</td><td>$1.10 per lb</td><td>Овощи</td></tr>
                        <tr><td>Lollipops</td><td>$2.61</td><td>Сладости</td></tr>
                        <tr><td>Lotion</td><td>$7.97</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Mayonnaise</td><td>$3.99</td><td>Oil</td></tr>
                    </table>
                    <table>
                        <tr><td>Soda</td><td>$2.05</td><td>Сладости</td></tr>
                        <tr><td>Spaghetti</td><td>$2.92</td><td>Зерновые</td></tr>
                        <tr><td>Steak</td><td>$4.97 per lb</td><td>Белковые</td></tr>
                        <tr><td>Sugar</td><td>$2.08</td><td>Сладости</td></tr>
                        <tr><td>Tea</td><td>$2.35</td><td>Water</td></tr>
                        <tr><td>Tissues</td><td>$3.94</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Tomatoes</td><td>$1.80 per lb</td><td>Фрукты</td></tr>
                        <tr><td>Toothpaste</td><td>$2.50</td><td>Красота/Гигиена</td></tr>
                        <tr><td>Turkey</td><td>$2.98 per lb</td><td>Белковые</td></tr>
                        <tr><td>Water Bottles</td><td>$9.37</td><td>Water</td></tr>
                        <tr><td>White Bread</td><td>$2.43</td><td>Зерновые</td></tr>
                        <tr><td>White Milk</td><td>$3.62</td><td>Молочные</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Стр. 3 из 3</div>
        </div>
    </div>
</body>
</html>