<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Intervals — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
    .imgbox {
        display: grid;
        height: 100%;
    }
    .center-fit {
        max-width: 80%;
        max-height: 80vh;
        margin: auto;
    }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Intervals</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Intervals.svg" class="diagram">
                <h2>On the Subject of Intervals</h2>
                <p class="flavour-text">Two buttons? This should be super easy!</p>
                <ul>
                    <li>On the module there are 2 buttons both with a label on it.
                    <li>To solve the module, submit the correct interval which will be played on the module.
                    <li>Submitting the wrong interval will earn you a strike.
                    <li>There are four possible combinations that can be used as a button press: Left Left, Right Right, Left Right, and Right Left.
                    <li>Two of these combinations will cycle one of the buttons, and will play three notes in a certain direction depending on the button. The left button will always cycle in the order: I (Major), A (Minor), + (Augmented), o (Diminished), and P (Perfect). The right button will cycle through the numbers 1 - 8.
                    <li>One of the combinations will play an interval either melodically (ascending or descending) or harmonically (at the same time). This is the interval that you need to submit.
                    <li>One of the combinations submits the interval given on the screen, and will play a three note chord. This combination will not submit the first time you use it.
                    <li>All the combinations will be shuffled, but they will not change.
                    <li>Refer to “Interval Information” for what the title says.
                </ul>
                <h3>Piano</h3>
                <div>
                    <!--

                        <select></select>
                        <button>Play</button>
                    -->
                    <svg viewBox="-0.05 -0.05 22.1 3.75" class="piano-1"></svg>
                    <svg viewBox="-0.05 -0.05 22.1 3.75" class="piano-2"></svg>
                    <audio class="note-audio" hidden>
                </div>
                <h3><b><u>Interval Information</b></u></h3>
                <p>An interval is the distance between two pitches. All intervals have a quality and a numberical value (e.g. M6, m3, P4).
                <p>Each interval will either have a quality of major, minor, augmented, diminished, or perfect. However, the only possible perfect intervals are P1, P4, P5, and P8, and perfect intervals like these cannot be minor or major. This means that M5 or m8 would not be possible. In addition, a diminished 1st (dim1) is not possile.
                <p>Below is a example of all the possible intervals.
                <div class="imgbox">
                    <img class="center-fit" src='img/Intervals/Intervals.png'>
                </div>
            </div>
           <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Intervals</span>
            </div>
            <div class="page-content">
                <p>To recognize a certain interval, many people use references to popular, well known music that has that interval. For example, a P5 can be found as the first two notes of the star wars theme. A helpful online article (in english) can be found <a href="https://flypaper.soundfly.com/tips/interval-cheat-sheet-songs-to-help-you-remember-common-intervals/">here</a>.
                <p>Obviously, the module will not play the interval with the exact same notes. It will start on a different note, but play the same interval. Although an interval can start on a different note, they will still sound the same. For example, listen to the audio clips below. They are both the same piece, with the same interval, even though they have different notes.
                <br>
                <audio controls>
                    <source src="img/Intervals/TwinkleC.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <audio controls>
                    <source src="img/Intervals/TwinkleFS.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <p>Try listening to the next audio clip below and try to recognize the music. See how it is easily recognizable even though it is in a totally different note center?
                <br>
                <audio controls>
                    <source src="img/Intervals/Mario.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <p>So what is a good way to learn these intervals? The only way is through ear training. A website that could be used for ear traning is musictheory.net <a href="https://www.musictheory.net/exercises">musictheory.net</a> on the Ear Training section, but there are many other apps and websites out there that could help. The easiest intervals will be the Perfect intervals, and the hardest will be the minor intervals. Good luck!
            </div>
           <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
    <script>
        const noteAudio = document.querySelector("audio.note-audio");
        const notes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];

        let piano = document.querySelector(".piano-1");
        let x = 0;
        for (let octave = 3; octave < 9; octave++)
        {
            if (octave == 6)
            {
                piano = document.querySelector(".piano-2");
                x = 0;
            }

            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute("x", x + 3.5);
            text.setAttribute("y", 3.5);
            text.setAttribute("font-size", "0.5");
            text.setAttribute("fill", "black");
            text.setAttribute("text-anchor", "middle");
            text.textContent = (octave == 3 ? "3rd" : `${octave}th`) + " Octave";;
            piano.append(text);

            for (const note of notes) {
                const sharp = note.endsWith("#");

                const key = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                key.setAttribute("x", x - (sharp ? 0.4 : 0));
                key.setAttribute("y", 0);
                key.setAttribute("width", sharp ? 0.75 : 1);
                key.setAttribute("height", sharp ? 2 : 3);
                key.setAttribute("fill", sharp ? "black" : "white");
                key.setAttribute("stroke", "black");
                key.setAttribute("stroke-width", 0.05);
                if (sharp) piano.append(key); else piano.prepend(key);

                key.addEventListener("click", function() {
                    noteAudio.src = `audio/Intervals/${encodeURIComponent(note + octave)}.mp3`;
                    noteAudio.play();
                });

                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("x", x - (sharp ? 0.4 : 0) + (sharp ? 0.75 : 1) / 2);
                text.setAttribute("y", sharp ? 1.25 : 2.6);
                text.setAttribute("font-size", "0.5");
                text.setAttribute("fill", sharp ? "white" : "black");
                text.setAttribute("text-anchor", "middle");
                text.style.pointerEvents = "none";
                text.textContent = note;
                piano.append(text);

                x += sharp ? 0 : 1;

                if (octave == 8)
                    break;
            }
        }

        selector.addEventListener("change", function(e)
        {
            noteAudio.src = `audio/Intervals/${encodeURIComponent(selector.value)}.mp3`;
            noteAudio.play();
        });
    </script>
</body>
</html>
