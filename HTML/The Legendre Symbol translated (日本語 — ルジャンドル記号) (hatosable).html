<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ルジャンドル記号 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        /* CSS code adapted from how Wikipedia uses CSS to display inline fractions. */
        .boxed {
            border: 0.1em solid;
            /* Special Elite already has some padding on the bottom */
            padding: 0.25em 0.25em 0 0.25em;
        }
        .case-conditions {
            text-align: left;
            margin-left: 1em;
        }
        .case-item {
            display: block;
            line-height: 1.1em;
        }
        .case-values {
            text-align: right;
        }
        .cases2 {
            font-size: 200%;
            margin-right: 0.05em;
        }
        .cases3 {
            font-size: 300%;
            margin-right: 0.05em;
        }
        .cases2-options {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.15em;
        }
        .cases3-options {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.45em;
        }
        .equation {
            white-space: nowrap;
            font-family:'Special Elite';
        }
        .frac {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.15em;
            font-size: 50%;
            text-align: center;
        }
        .frac-pure-legendre {
            vertical-align: -0.3em;
        }
        .fracnum {
            display: block;
            line-height: 1em;
            margin: 0 0.1em;
        }
        .fracden {
            display: block;
            line-height: 1em;
            margin: 0 0.1em;
            border-top: 0.1em solid;
        }
        .fracden-numeric-tight {
            padding-top: 0.1em;
        }
        .fracden-numeric {
            padding-top: 0.2em;
        }
        .legendre {
            font-size: 200%;
        }
        .nudge-up {
            vertical-align: 0.3em;
        }
        table.center {
            margin-left: auto;
            margin-right: auto;
        }
        .times-box {
            padding-left: 0.1em;
            padding-right: 0.1em;
        }
        .underneath {
            position: absolute;
            font-size: 10px;
            left: 50%;
            bottom: -20px;
            transform: translateX(-50%);
        }
        .underneath-container {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ルジャンドル記号</span>
            </div>
            <div class="page-content">
                <img src="img/Component/The Legendre Symbol.svg" class="diagram">

                <h2>モジュール詳細：ルジャンドル記号</h2>

                <p class="flavour-text">小学校で分数に苦手意識を持っていた皆さん、これを扱わなかったことに感謝しましょう。</p>

                <ul>
                    <li>各ディスプレーには、1から999の自然数が一つ表示されている。</li>
                    <li>上のディスプレーの数字は下のディスプレーの数字より小さくなる。</li>
                    <li>下のディスプレーの数字は三桁の素数になる。</li>
                    <li>このモジュールを解除するには、qとmをそれぞれ上と下のディスプレーの数字とする。qがmを法とする平方剰余である場合、「R」と書かれたボタンを押す。そうではない場合、「N」と書かれたボタンを押す。</li>
                    <li>間違ったボタンを押すとミスが記録され、ディスプレー上の数字が変更される。</li>
                </ul>

                <h3>平方剰余に関する役立つメモ</h3>

                <p>pを法として平方数と合同である整数qを、pを法とする<em>平方剰余</em>と呼ぶ。つまり、qが平方剰余であるとは、qに対し以下の条件を満たす整数xが存在することを意味する：x<sup>2</sup>&nbsp;&equiv;&nbsp;q&nbsp;(mod&nbsp;m).平方剰余ではない数を<em>平方非剰余</em>と呼ぶ。</p>

                <p>例えば、平方数を10で割った余りは0, 1, 4, 5, 6, 9のいずれかになる。したがって、10で割った余りがこれらのうちのいずれかになる数(余りそのものの数も含む)は10を法とする平方剰余である。それ以外の数は平方非剰余である。</p>

                <p>特に、奇素数(奇数の素数)pを法とする場合、平方剰余であるかどうかは<em>ルジャンドル記号</em>を用いて以下のように示すことができる。</p>

                <p class="diagram-label equation">
                    <span class="nudge-up"><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span>
                    <span class="nudge-up">=</span></span>
                    <span class="cases3">{</span><span class="cases3-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span><span class="case-item">0</span></span><span class="cases3-options case-conditions"><span class="case-item">qがpを法とする平方剰余であるがpの倍数ではない</span><span class="case-item">qがpを法とする平方非剰余である</span><span class="case-item">qがpの倍数である</span></span>
                </p>

                <p>(上記の定義におけるaの「倍数」は負の数やゼロを含む。例えば、14, 49, 0,  -21 はすべて7の倍数である)</p>

                <p>三番目の条件はこのモジュールでは決して適用されない。これは、「ルジャンドル記号」モジュールでは常に0 &lt; q &lt; pとなるためである。三番目の条件は数学的に完全な式とするために列挙しているだけである。</p>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ルジャンドル記号</span>
            </div>
            <div class="page-content">
                <h3>ルジャンドル記号の性質</h3>

                <p>ルジャンドル記号には興味深い性質がいくつかある。以下はその一部である。</p>
                <p>a &equiv; b (mod p)とは、pを法としてaとbが合同、つまり、aをpで割った余りがbをpで割った余りと等しいことを意味する。</p>

                <ol>
                    <li>
                        <p><strong>周期性.</strong>  pを奇素数とする。 a &equiv; b (mod p)の場合：</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">a</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">=</span>
                            <span class="legendre">(<span class="frac"><span class="fracnum">b</span><span class="fracden">p</span></span>)</span>
                        </p>
                    </li>
                    <li>
                        <p><strong>相乗性.</strong>  pを奇素数とする。  整数a, bに対し、</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">ab</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">=</span>
                            <span class="legendre">(<span class="frac"><span class="fracnum">a</span><span class="fracden">p</span></span>)</span><span class="legendre">(<span class="frac"><span class="fracnum">b</span><span class="fracden">p</span></span>)</span>
                        </p>
                        <p>これは三つ以上の整数に対して拡張することもでき、帰納法によって簡単に証明できる。</p>
                    </li>
                    <li>
                        <p><strong>平方剰余の相互法則.</strong>  pとqを異なる奇素数とする。</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p-1</span><span class="fracden fracden-numeric-tight">2</span></span>&centerdot;<span class="frac"><span class="fracnum">q-1</span><span class="fracden fracden-numeric-tight">2</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">p &equiv; 1 (mod 4) または q &equiv; 1 (mod 4)</span><span class="case-item">p &equiv; q &equiv; 3 (mod 4)</span></span>
                        </p>
                        <p>二つの異なる奇数のルジャンドル記号は&pm;1のどちらかしか取らない(一方の素数はもう一方の素数の倍数になることはない)かつ&pm;1の倍数は&pm;1で割り切れるため、この性質は以下のように書き直すことができる。</p>
                        <p class="diagram-label equation">
                            <span class="nudge-up">p &equiv; 1 (mod 4) または q &equiv; 1 (mod 4)の場合、</span><span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="nudge-up"> = </span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span><span class="nudge-up">.  それ以外は、</span><span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="nudge-up"> = -</span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span><span class="nudge-up">.</span>
                        </p>
                    </li>
                    <li>
                        <p><strong>平方剰余の相互法則 補足
                            1.</strong>  pを奇素数とする。</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">-1</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p-1</span><span class="fracden fracden-numeric-tight">2</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">p &equiv; 1 (mod 4)</span><span class="case-item">p &equiv; 3 (mod 4)</span></span>
                        </p>
                    </li>
                    <li>
                        <p><strong>平方剰余の相互法則 補足
                            2.</strong> pを奇素数とする。</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">2</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p<sup>2</sup>-1</span><span class="fracden fracden-numeric-tight">8</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">p &equiv; 1 または 7 (mod 8)</span><span class="case-item">p &equiv; 3 または 5 (mod 8)</span></span>
                        </p>
                    </li>
                </ol>
            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ルジャンドル記号</span>
            </div>
            <div class="page-content">
                <h3>ルジャンドル記号の値の演算</h3>

                <p>前のページの性質を繰り返し適用することで、あるルジャンドル記号の値を、より小さい法における別のルジャンドル記号で示すことができる。</p>

                <p>最終的に、法が非常に小さくなると、ルジャンドル記号の値は、平方数を小さい順にいくつか列挙してそれらの剰余を手動で確認する(以下の表を参照)ことで求められる。また、ルジャンドル記号の「分子」が平方数であることを求められれば、定義からそのルジャンドル記号に+1を割り当てることでも求められる。</p>

                <p>例えば、14が41を法として平方非剰余であることを示す。上記5つのルールのいずれかを使用して生成された新たな項は、それに応じた注釈が記載されている。</p>
                <p class="diagram-label equation">
                    <span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">14</span><span class="fracden fracden-numeric">41</span></span>)</span>
                    <span class="nudge-up">=</span>
                    <span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">2</span><span class="fracden fracden-numeric">41</span></span>)</span><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">7</span><span class="fracden fracden-numeric">41</span></span>)</span><span class="underneath">(ルール2)</span></span>
                    <span class="nudge-up">= <span class="underneath-container">(-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">41<sup>2</sup>-1</span><span class="fracden fracden-numeric">8</span></span></sup><span class="underneath">(ルール5)</span></span><span class="times-box">&centerdot;</span></span><span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">41</span><span class="fracden fracden-numeric">7</span></span>)</span><span class="underneath">(ルール3)</span></span>
                    <span class="nudge-up">= (-1)<sup style="top: -0.75em;">210</sup><span class="times-box">&centerdot;</span></span><span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">-1</span><span class="fracden fracden-numeric">7</span></span>)</span><span class="underneath">(ルール1)</span></span>
                    <span class="nudge-up">= 1<span class="times-box">&centerdot;</span><span class="underneath-container">(-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">7-1</span><span class="fracden fracden-numeric">2</span></span></sup><span class="underneath">(ルール4)</span></span> = (-1)<sup style="top: -0.75em;">3</sup> = <span class="boxed">-1</span></span>
                </p>

                <p>ルジャンドル記号の値が-1となったため、14は41を法として平方非剰余であることが分かる。</p>

                <p>最終的な答えに辿り着くまでのルールの適用方法は複数パターンがあり、より速く効率的な方法もある可能性があるが、常に答えは同じになる。様々なアルゴリズムを試してみて、最適な方法を見つけてみてほしい。</p>

                <h3>平方剰余の列挙方法</h3>

                <p>pを法とする平方剰余(pは奇素数)で割った余りを手動で列挙する際、pを法とする平方剰余は[1からp-1までの整数の個数の<em>ちょうど半分</em>]個存在し、残りは平方非剰余になることを覚えておくとよいかもしれない(この命題の証明は読者への演習とする)。</p>

                <p>以下は、様々な小さい素数について平方剰余を列挙した表である。</p>

                <table class="center">
                    <tr>
                        <th>p</th>
                        <th>1からp-1までのpを法とする平方剰余</th>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>1, 4</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>1, 2, 4</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>1, 3, 4, 5, 9</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td>1, 3, 4, 9, 10, 12</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>
