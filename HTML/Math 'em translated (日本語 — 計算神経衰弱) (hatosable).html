<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>計算神経衰弱 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table { margin: 0 auto; }
        .hstack table {
            width: 49%;
            line-height: 1.2;
        }
        .hstack.f1 table { font-size: 12px; }
        .hstack.f2 table { font-size: 13px; }
        th img { width: 40px; }
        ul, p { margin: .5em 0; }
        h3 { margin: .5em 0 0; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算神経衰弱</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Math 'em.svg" class="diagram">
                <h2>モジュール詳細：計算神経衰弱</h2>
                <p class="flavour-text">シャッフルで脳までかき混ぜないように。</p>
                <p>このモジュール上には16枚のタイルが4段に並んだボードがある。<br>
                各タイルは「白、銅、銀、金」の4色があり、そのうち金は「定数、変数、演算」のいずれか一つのタイプを持つ。</p>
                <ul>
                    <li>各変数の値を代入しタイルを上段から下段の順で左から右に読む、ある数学の方程式を形成する。</li>
                    <li>各演算のペアの間にあるタイルの数字は、連結して一つの数字を形成する。</li>
                    <li>値が99999999を超える場合、先頭八桁のみを取得する。</li>
                    <li>前の演算の出力を次の演算の入力とし、1つの数字が残るまで、各演算を各数字のペアに読み順で順次適用する。</li>
                    <li><ul>
                        <li>二個以上の演算タイルが連続して現れている場合、最初と最後の演算で<em>複合演算</em>を形成する。</li>
                        <li>最初のタイルが演算の場合、タイルシーケンスの最初と最後の数字に対してそれを適用する。</li>
                        <li>最後のタイルが演算の場合、直前の演算の結果とタイルシーケンスの最初の数字に対してそれを適用する。</li>
                    </ul></li>
                    <li>最後の演算の結果をキーパッドに入力し、送信する。
                    <ul>
                        <li>&lt;キーを押すと、直前に入力した数字を削除する。</li>
                        <li>最終結果が99999999を超える場合、下八桁のみを取得する。</li>
                    </ul></li>
                </ul>
                <p>送信内容が正しい場合、ハッチが開き、ボタンが現れる。このボタンを押すとタイルが裏返しになりシャッフルを5回行う。カードはいずれかの方法でシャッフルされる。</p>
                <ul>
                    <li>2つの段／列を交換する。</li>
                    <li>段／列全体を1つシフトする。</li>
                    <li>中央を中心に時計／反時計に4枚のカードを回転させる。</li>
                    </ul>
                <p>5回のシャッフルが完了したら、シャッフルされたグリッドに対して上記のステップを再度行う。</p>
                <ul>
                    <li>ボード上のタイルの位置が関係する変数は、その新しい配置に基づき更新される。</li>
                    <li>時間が関係する変数は、最後のシャッフルが完了した時間に基づき更新される。</li>
                </ul>
                <p>この段階で間違った値が提出された場合、ボードはリセットされ、ボタンが押されると新しい一連のシャッフルが始まる。</p>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算神経衰弱</span>
            </div>
            <div class="page-content">
                <h3>定数</h3>
                <table>
                    <tr><th><img src="img/Math em/0.svg"></th><th><img src="img/Math em/1.svg"></th><th><img src="img/Math em/2.svg"></th><th><img src="img/Math em/3.svg"></th><th><img src="img/Math em/4.svg"></th></tr>
                    <tr><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th></tr>
                    <tr><th><img src="img/Math em/5.svg"></th><th><img src="img/Math em/6.svg"></th><th><img src="img/Math em/7.svg"></th><th><img src="img/Math em/8.svg"></th><th><img src="img/Math em/9.svg"></th></tr>
                    <tr><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th></tr>
                </table>
                <h3>変数</h3>
                <p>すべての変数の値は、10以上であれば下一桁を取得し、0～9の範囲内でなければいけない。</p>
                <div class="hstack f2 gap">
                <table>
                    <tr><th><img src="img/Math em/A.svg"></th><td>このタイル以外の同じ色のタイルの枚数。</td></tr>
                    <tr><th><img src="img/Math em/B.svg"></th><td>同じ色の定数がない場合、値は0になる。<br>そうでない場合、読み順でこのタイルより後に現れる同じ色の定数のうち最初に現れたもの(必要に応じて最初のタイルにループする)と同じ値になる。</td></tr>
                    <tr><th><img src="img/Math em/C.svg"></th>
                        <td>タイルが自身の色に対応するボードの領域に属している場合、その値はシリアルナンバーの最初の数字となり、そうでない場合、その値はシリアルナンバーの最後の数字となる。
                        <ul>
                            <li>白- 上半分</li>
                            <li>銅- 奇数番目の段</li>
                            <li>銀- 左半分</li>
                            <li>金- 奇数番目の列</li>
                        </ul></td>
                    </tr>
                    <tr><th><img src="img/Math em/D.svg"></th>
                        <td>読み順におけるタイルの位置。色によって読む方向が異なる。
                        <ul>
                            <li>白- 一番上の左から右に読む。一番右まで到達したら一段下に進む。</li>
                            <li>銅- 一番右の上から下に読む。一番下まで到達したら一列左に進む。</li>
                            <li>銀- 一番下の左から右に読む。一番右まで到達したら一段上に進む。</li>
                            <li>金- 一番左の下から上に読む。一番上まで到達したら一列右に進む。</li>

                        </ul>
                        </td>
                    </tr>
                    <tr><th><img src="img/Math em/E.svg"></th>
                        <td>上下左右に隣接する定数の和。ボードの端はループしている。</td>
                    </tr>
                </table>
                <table>
                    <tr><th><img src="img/Math em/F.svg"></th>
                        <td>タイルの色に基づく列にある定数の和。
                        <ul>
                            <li>白- 1列目。</li>
                            <li>銅- 2列目。</li>
                            <li>銀- 3列目。</li>
                            <li>金- 4列目。</li>
                        </ul></td>
                    </tr>
                    <tr><th><img src="img/Math em/G.svg"></th>
                        <td>タイルの色に基づく時間単位におけるモジュール起動時時点の時間。
                        <ul>
                            <li>白- 爆弾のカウントダウンタイマーの残り分数。</li>
                            <li>銅- 実際の日時の「分」を示す数。</li>
                            <li>銀- 実際の日時の「時間」を示す数(24時間表記)。</li>
                            <li>金- 実際の日時の「日」を示す数。</li>
                        </ul></td>
                    </tr>
                    <tr><th><img src="img/Math em/H.svg"></th>
                        <td>エッジワークの個数。
                        <ul>
                            <li>白- バッテリーの本数。</li>
                            <li>銅- ポートの個数。</li>
                            <li>銀- インジケーターの個数。</li>
                            <li>金- インジケーターラベルに含まれる子音の個数。</li>
                        </ul></td>
                    </tr>
                    <tr><th><img src="img/Math em/I.svg"></th><td>このタイルと同じ段になく同じ列にもなく同じ色でもない定数の和。</td></tr>
                    <tr><th><img src="img/Math em/J.svg"></th><td>シリアルナンバー内の最大の数字未満である定数の和。</td></tr>
                </table>
                </div>
           </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算神経衰弱</span>
            </div>
            <div class="page-content">
                <h3>演算</h3>
                <table style="font-size:14px">
                    <tr><th><img src="img/Math em/Plus.svg"></th><td>入力同士の和を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Diff.svg"></th><td>入力同士の絶対差を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Mod.svg"></th><td>2つの入力のうち大きい方の入力を小さい方の入力で割った余りを出力する。</td></tr>
                    <tr><th><img src="img/Math em/Xor.svg"></th><td>両方の入力を二進数にする。<br>2つの入力の各ビットにXOR演算を適用する。<br>十進数に変換した結果を出力する。</td></tr>
                </table>
                <h3>複合演算</h3>
                <div class="hstack f1 gap">
                <table>
                    <tr><th><img src="img/Math em/Plus.svg"><img src="img/Math em/Plus.svg"></th><td>各入力の平方の和の平方根の2倍を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Diff.svg"><img src="img/Math em/Diff.svg"></th><td>2つの入力の絶対差Dを取得する。<br>小さい方の入力の平方とDの平方の絶対差の平方根を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Mod.svg"><img src="img/Math em/Diff.svg"></th><td>入力に含まれる桁数の平方の和を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Xor.svg"><img src="img/Math em/Plus.svg"></th><td>両方の入力を二進数にする。<br>2つの入力の各ビットにOR演算を適用する。<br>十進数に変換した結果を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Xor.svg"><img src="img/Math em/Mod.svg"></th><td>両方の入力を二進数にする。<br>各二進数に含まれる1の個数の積を出力する。</td></tr>
                </table>
                <table>
                    <tr><th><img src="img/Math em/Plus.svg"><img src="img/Math em/Diff.svg"></th><td>両方の入力を平衡三進数にする。<br>2つの入力の各ビットにXOR演算を適用する。<br>十進数に変換し、その絶対値を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Mod.svg"><img src="img/Math em/Plus.svg"></th><td>2つの入力の調和平均を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Mod.svg"><img src="img/Math em/Mod.svg"></th><td>2つの入力のうち大きい方の入力を小さい方の入力で割った余りRを取得する。<br>小さい方の入力をRで割った余りを出力する。</td></tr>
                    <tr><th><img src="img/Math em/Xor.svg"><img src="img/Math em/Diff.svg"></th><td>両方の入力を二進数にする。<br>2つの入力の各ビットにAND演算を適用する。<br>十進数に変換した結果を出力する。</td></tr>
                    <tr><th><img src="img/Math em/Xor.svg"><img src="img/Math em/Xor.svg"></th><td>両方の入力を二進数にする。<br>2つの入力の各ビットにXOR演算を適用する。<br>セル・オートマトンの<a href="https://ja.wikipedia.org/wiki/ルール30">ルール30</a>を適用する。両端はループし、1と0がそれぞれセルのオンとオフを示しているとする。<br>十進数に変換した結果を出力する。</td></tr>
                </table>
                </div>
                <p style="font-size:14px">補足：- 整数以外の出力は小数点以下を切り捨てる。<br>- 割る数に0が適用される場合、結果は0とする。</p>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>